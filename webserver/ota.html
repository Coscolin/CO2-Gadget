<!DOCTYPE html>
<html lang="en" theme="light">
<head>
    <meta charset="UTF-8" />
    <title>CO2 Gadget Configuration</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script>
        // Immediately set the theme based on localStorage before the CSS is loaded
        (function () {
            const savedTheme = localStorage.getItem("theme");
            if (savedTheme) {
                document.documentElement.setAttribute("theme", savedTheme);
            }
        })();
    </script>
    <link rel="stylesheet" type="text/css" href="./style.css" />
    <script defer type="text/javascript" src="./ota.js"></script>
    <!-- <script defer type="text/javascript" src="./combined.js"></script> -->
</head>

<body>
    <!-- Navigation bar -->
    <div class="navbar" id="navbar">
        <div class="nav-content">
            <div class="nav-links-left">
                <a href="index.html">Home</a>
                <a href="preferences.html">Preferences</a>
                <a href="low_power.html">Low power</a>
                <a href="status.html">Status</a>
            </div>
            <div class="nav-links-right">
                <a href="ota.html" class="hidden" id="otaLink">OTA</a>
                <a href="/getCaptivePortalStatusAsJson">
                    <span id="server-status-dot" class="status-dot status-dot-hidden" title="Captive portal inactive"></span>
                </a>
                <!-- Theme Switch Icon -->
                <div class="iconDarkLight" id="iconBulb">
                    <svg style="width: 24px; height: 24px" viewBox="0 0 24 24">
                        <path fill="var(--icon-color)"
                            d="M12,2A7,7 0 0,0 5,9C5,11.38 6.19,13.47 8,14.74V17A1,1 0 0,0 9,18H15A1,1,0 0,0 16,17V14.74C17.81,13.47 19,11.38 19,9A7,7 0 0,0 12,2M9,21A1,1 0 0,0 10,22H14A1,1 0 0,0 15,21V20H9V21Z" />
                    </svg>
                </div>
            </div>
        </div>
        <!-- Captive Portal Status Container -->
        <div id="captive-portal-status-bar" class="captive-portal-status-bar hidden-captive-portal-status-bar"></div>
    </div>

    <!-- Debug Window Container -->
    <div id="debug-window" class="debug-window hidden-debug-window"></div>


    <!-- Main content -->
    <div class="content">
        <!-- iframe to load AsyncAElegantOTA -->
        <iframe src="update" width="100%" height="600px" frameborder="0"></iframe>
    </div>
    </body>
</html>